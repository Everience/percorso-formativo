<div class="header">
  <div class="status-select" [class.status-select--open]="statusDropdownOpen()" (click)="toggleDropdown(); $event.stopPropagation()">
    <span class="status-select__text">{{ currentStatusLabel }}</span>
    <div class="status-select__material">
      <div class="status-select__edge-reflection"></div>
      <div class="status-select__emboss-reflection"></div>
      <div class="status-select__refraction"></div>
      <div class="status-select__blur"></div>
      <div class="status-select__blend-layers"></div>
      <div class="status-select__blend-edge"></div>
      <div class="status-select__highlight"></div>
    </div>
    @if (statusDropdownOpen()) {
      <div class="status-select__dropdown">
        @for (option of statusOptions; track option.value) {
          <button
            class="status-select__option"
            [class.status-select__option--active]="option.value === currentStatus()"
            (click)="selectStatus(option.value); $event.stopPropagation()"
          >
            {{ option.label }}
          </button>
        }
      </div>
    }
  </div>
  <app-glass-elem svgIcon="/images/icons/close.svg" alt="Close" (click)="courseDetailService.close(); $event.stopPropagation()" />
</div>

<h1 class="title">{{ courseTitle() }}</h1>

@if (detailLoading()) {
  <p class="description description--loading">Caricamento...</p>
} @else if (courseDescription()) {
  <p class="description">{{ courseDescription() }}</p>
}

@if (!detailLoading() && resources().length > 0) {
  <div class="resources">
    <div class="resources__header">
      <h2 class="resources__title">Risorse</h2>
      <div class="resources__line"></div>
    </div>
    <div class="resources__list">
      @for (resource of resources(); track resource.id) {
        <a class="resources__item" [href]="resource.video_url" target="_blank" rel="noopener noreferrer">
          <span class="resources__platform" [class]="platformClass(resource.platform)">
            {{ resource.platform }}
          </span>
          <span class="resources__link">{{ resource.title }}</span>
        </a>
      }
    </div>
  </div>
}
